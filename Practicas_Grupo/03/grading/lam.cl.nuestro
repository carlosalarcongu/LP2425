_program

  _class

    VarList

    IO

    "lam.cl"

    (

    _method

      isNil

      Bool

      _bool

        1

      : _no_type

    _method

      head

      Variable

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _new

          Variable

        : _no_type

      : _no_type

    _method

      tail

      VarList

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _new

          VarList

        : _no_type

      : _no_type

    _method

      add

      _formal

        x

        Variable

      VarList

      _dispatch

        _new

          VarListNE

        : _no_type

        init

        (

        _object

          x

        : _no_type

        _object

          self

        : _no_type

        )

      : _no_type

    _method

      print

      SELF_TYPE

      _dispatch

        _object

          self

        : _no_type

        out_string

        (

        _string

          "\n"

        : _no_type

        )

      : _no_type

    )

  _class

    VarListNE

    VarList

    "lam.cl"

    (

    _attr

      x

      Variable

      _no_expr

      : _no_type

    _attr

      rest

      VarList

      _no_expr

      : _no_type

    _method

      isNil

      Bool

      _bool

        0

      : _no_type

    _method

      head

      Variable

      _object

        x

      : _no_type

    _method

      tail

      VarList

      _object

        rest

      : _no_type

    _method

      init

      _formal

        y

        Variable

      _formal

        r

        VarList

      VarListNE

      _block

        _assign

          x

          _object

            y

          : _no_type

        : _no_type

        _assign

          rest

          _object

            r

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      print

      SELF_TYPE

      _block

        _dispatch

          _object

            x

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            " "

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            rest

          : _no_type

          print

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    )

  _class

    LambdaList

    Object

    "lam.cl"

    (

    _method

      isNil

      Bool

      _bool

        1

      : _no_type

    _method

      headE

      VarList

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _new

          VarList

        : _no_type

      : _no_type

    _method

      headC

      Lambda

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _new

          Lambda

        : _no_type

      : _no_type

    _method

      headN

      Int

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _int

          0

        : _no_type

      : _no_type

    _method

      tail

      LambdaList

      _block

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _new

          LambdaList

        : _no_type

      : _no_type

    _method

      add

      _formal

        e

        VarList

      _formal

        x

        Lambda

      _formal

        n

        Int

      LambdaList

      _dispatch

        _new

          LambdaListNE

        : _no_type

        init

        (

        _object

          e

        : _no_type

        _object

          x

        : _no_type

        _object

          n

        : _no_type

        _object

          self

        : _no_type

        )

      : _no_type

    )

  _class

    LambdaListNE

    LambdaList

    "lam.cl"

    (

    _attr

      lam

      Lambda

      _no_expr

      : _no_type

    _attr

      num

      Int

      _no_expr

      : _no_type

    _attr

      env

      VarList

      _no_expr

      : _no_type

    _attr

      rest

      LambdaList

      _no_expr

      : _no_type

    _method

      isNil

      Bool

      _bool

        0

      : _no_type

    _method

      headE

      VarList

      _object

        env

      : _no_type

    _method

      headC

      Lambda

      _object

        lam

      : _no_type

    _method

      headN

      Int

      _object

        num

      : _no_type

    _method

      tail

      LambdaList

      _object

        rest

      : _no_type

    _method

      init

      _formal

        e

        VarList

      _formal

        l

        Lambda

      _formal

        n

        Int

      _formal

        r

        LambdaList

      LambdaListNE

      _block

        _assign

          env

          _object

            e

          : _no_type

        : _no_type

        _assign

          lam

          _object

            l

          : _no_type

        : _no_type

        _assign

          num

          _object

            n

          : _no_type

        : _no_type

        _assign

          rest

          _object

            r

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    )

  _class

    LambdaListRef

    Object

    "lam.cl"

    (

    _attr

      nextNum

      Int

      _int

        0

      : _no_type

    _attr

      l

      LambdaList

      _no_expr

      : _no_type

    _method

      isNil

      Bool

      _dispatch

        _object

          l

        : _no_type

        isNil

        (

        )

      : _no_type

    _method

      headE

      VarList

      _dispatch

        _object

          l

        : _no_type

        headE

        (

        )

      : _no_type

    _method

      headC

      Lambda

      _dispatch

        _object

          l

        : _no_type

        headC

        (

        )

      : _no_type

    _method

      headN

      Int

      _dispatch

        _object

          l

        : _no_type

        headN

        (

        )

      : _no_type

    _method

      reset

      SELF_TYPE

      _block

        _assign

          nextNum

          _int

            0

          : _no_type

        : _no_type

        _assign

          l

          _new

            LambdaList

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      add

      _formal

        env

        VarList

      _formal

        c

        Lambda

      Int

      _block

        _assign

          l

          _dispatch

            _object

              l

            : _no_type

            add

            (

            _object

              env

            : _no_type

            _object

              c

            : _no_type

            _object

              nextNum

            : _no_type

            )

          : _no_type

        : _no_type

        _assign

          nextNum

          _plus

            _object

              nextNum

            : _no_type

            _int

              1

            : _no_type

          : _no_type

        : _no_type

        _sub

          _object

            nextNum

          : _no_type

          _int

            1

          : _no_type

        : _no_type

      : _no_type

    _method

      removeHead

      SELF_TYPE

      _block

        _assign

          l

          _dispatch

            _object

              l

            : _no_type

            tail

            (

            )

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    )

  _class

    Expr

    IO

    "lam.cl"

    (

    _method

      print_self

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\nError: Expr is pure virtual; can't print self\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      beta

      Expr

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\nError: Expr is pure virtual; can't beta-reduce\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      substitute

      _formal

        x

        Variable

      _formal

        e

        Expr

      Expr

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\nError: Expr is pure virtual; can't substitute\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      gen_code

      _formal

        env

        VarList

      _formal

        closures

        LambdaListRef

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\nError: Expr is pure virtual; can't gen_code\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          abort

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    )

  _class

    Variable

    Expr

    "lam.cl"

    (

    _attr

      name

      String

      _no_expr

      : _no_type

    _method

      init

      _formal

        n

        String

      Variable

      _block

        _assign

          name

          _object

            n

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      print_self

      SELF_TYPE

      _dispatch

        _object

          self

        : _no_type

        out_string

        (

        _object

          name

        : _no_type

        )

      : _no_type

    _method

      beta

      Expr

      _object

        self

      : _no_type

    _method

      substitute

      _formal

        x

        Variable

      _formal

        e

        Expr

      Expr

      _cond

        _eq

          _object

            x

          : _no_type

          _object

            self

          : _no_type

        : _no_type

        _object

          e

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      gen_code

      _formal

        env

        VarList

      _formal

        closures

        LambdaListRef

      SELF_TYPE

      _let

        cur_env

        VarList

        _object

          env

        : _no_type

        _block

          _loop

            _cond

              _dispatch

                _object

                  cur_env

                : _no_type

                isNil

                (

                )

              : _no_type

              _bool

                0

              : _no_type

              _comp

                _eq

                  _dispatch

                    _object

                      cur_env

                    : _no_type

                    head

                    (

                    )

                  : _no_type

                  _object

                    self

                  : _no_type

                : _no_type

              : _no_type

            : _no_type

            _block

              _dispatch

                _object

                  self

                : _no_type

                out_string

                (

                _string

                  "get_parent()."

                : _no_type

                )

              : _no_type

              _assign

                cur_env

                _dispatch

                  _object

                    cur_env

                  : _no_type

                  tail

                  (

                  )

                : _no_type

              : _no_type

            : _no_type

          : _no_type

          _cond

            _dispatch

              _object

                cur_env

              : _no_type

              isNil

              (

              )

            : _no_type

            _block

              _dispatch

                _object

                  self

                : _no_type

                out_string

                (

                _string

                  "Error:  free occurrence of "

                : _no_type

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                print_self

                (

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                out_string

                (

                _string

                  "\n"

                : _no_type

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                abort

                (

                )

              : _no_type

              _object

                self

              : _no_type

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              out_string

              (

              _string

                "get_x()"

              : _no_type

              )

            : _no_type

          : _no_type

        : _no_type

      : _no_type

    )

  _class

    Lambda

    Expr

    "lam.cl"

    (

    _attr

      arg

      Variable

      _no_expr

      : _no_type

    _attr

      body

      Expr

      _no_expr

      : _no_type

    _method

      init

      _formal

        a

        Variable

      _formal

        b

        Expr

      Lambda

      _block

        _assign

          arg

          _object

            a

          : _no_type

        : _no_type

        _assign

          body

          _object

            b

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      print_self

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\\"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            arg

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "."

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            body

          : _no_type

          print_self

          (

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      beta

      Expr

      _object

        self

      : _no_type

    _method

      apply

      _formal

        actual

        Expr

      Expr

      _dispatch

        _object

          body

        : _no_type

        substitute

        (

        _object

          arg

        : _no_type

        _object

          actual

        : _no_type

        )

      : _no_type

    _method

      substitute

      _formal

        x

        Variable

      _formal

        e

        Expr

      Expr

      _cond

        _eq

          _object

            x

          : _no_type

          _object

            arg

          : _no_type

        : _no_type

        _object

          self

        : _no_type

        _let

          new_body

          Expr

          _dispatch

            _object

              body

            : _no_type

            substitute

            (

            _object

              x

            : _no_type

            _object

              e

            : _no_type

            )

          : _no_type

          _let

            new_lam

            Lambda

            _new

              Lambda

            : _no_type

            _dispatch

              _object

                new_lam

              : _no_type

              init

              (

              _object

                arg

              : _no_type

              _object

                new_body

              : _no_type

              )

            : _no_type

          : _no_type

        : _no_type

      : _no_type

    _method

      gen_code

      _formal

        env

        VarList

      _formal

        closures

        LambdaListRef

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "((new Closure"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_int

          (

          _dispatch

            _object

              closures

            : _no_type

            add

            (

            _object

              env

            : _no_type

            _object

              self

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            ").init("

          : _no_type

          )

        : _no_type

        _cond

          _dispatch

            _object

              env

            : _no_type

            isNil

            (

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "new Closure))"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "self))"

            : _no_type

            )

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      gen_closure_code

      _formal

        n

        Int

      _formal

        env

        VarList

      _formal

        closures

        LambdaListRef

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "class Closure"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_int

          (

          _object

            n

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            " inherits Closure {\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  apply(y : EvalObject) : EvalObject {\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "    { out_string(\"Applying closure "

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_int

          (

          _object

            n

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\\n\");\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "      x <- y;\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            body

          : _no_type

          gen_code

          (

          _dispatch

            _object

              env

            : _no_type

            add

            (

            _object

              arg

            : _no_type

            )

          : _no_type

          _object

            closures

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            ";}};\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "};\n"

          : _no_type

          )

        : _no_type

      : _no_type

    )

  _class

    App

    Expr

    "lam.cl"

    (

    _attr

      fun

      Expr

      _no_expr

      : _no_type

    _attr

      arg

      Expr

      _no_expr

      : _no_type

    _method

      init

      _formal

        f

        Expr

      _formal

        a

        Expr

      App

      _block

        _assign

          fun

          _object

            f

          : _no_type

        : _no_type

        _assign

          arg

          _object

            a

          : _no_type

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      print_self

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "(("

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            fun

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            ")@("

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            arg

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "))"

          : _no_type

          )

        : _no_type

        _object

          self

        : _no_type

      : _no_type

    _method

      beta

      Expr

      _typcase

        _object

          fun

        : _no_type

        _branch

          l

          Lambda

          _dispatch

            _object

              l

            : _no_type

            apply

            (

            _object

              arg

            : _no_type

            )

          : _no_type

        _branch

          e

          Expr

          _let

            new_fun

            Expr

            _dispatch

              _object

                fun

              : _no_type

              beta

              (

              )

            : _no_type

            _let

              new_app

              App

              _new

                App

              : _no_type

              _dispatch

                _object

                  new_app

                : _no_type

                init

                (

                _object

                  new_fun

                : _no_type

                _object

                  arg

                : _no_type

                )

              : _no_type

            : _no_type

          : _no_type

      : _no_type

    _method

      substitute

      _formal

        x

        Variable

      _formal

        e

        Expr

      Expr

      _let

        new_fun

        Expr

        _dispatch

          _object

            fun

          : _no_type

          substitute

          (

          _object

            x

          : _no_type

          _object

            e

          : _no_type

          )

        : _no_type

        _let

          new_arg

          Expr

          _dispatch

            _object

              arg

            : _no_type

            substitute

            (

            _object

              x

            : _no_type

            _object

              e

            : _no_type

            )

          : _no_type

          _let

            new_app

            App

            _new

              App

            : _no_type

            _dispatch

              _object

                new_app

              : _no_type

              init

              (

              _object

                new_fun

              : _no_type

              _object

                new_arg

              : _no_type

              )

            : _no_type

          : _no_type

        : _no_type

      : _no_type

    _method

      gen_code

      _formal

        env

        VarList

      _formal

        closures

        LambdaListRef

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "(let x : EvalObject <- "

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            fun

          : _no_type

          gen_code

          (

          _object

            env

          : _no_type

          _object

            closures

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            ",\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "     y : EvalObject <- "

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            arg

          : _no_type

          gen_code

          (

          _object

            env

          : _no_type

          _object

            closures

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            " in\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  case x of\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "    c : Closure => c.apply(y);\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "    o : Object => { abort(); new EvalObject; };\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  esac)"

          : _no_type

          )

        : _no_type

      : _no_type

    )

  _class

    Term

    IO

    "lam.cl"

    (

    _method

      var

      _formal

        x

        String

      Variable

      _let

        v

        Variable

        _new

          Variable

        : _no_type

        _dispatch

          _object

            v

          : _no_type

          init

          (

          _object

            x

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      lam

      _formal

        x

        Variable

      _formal

        e

        Expr

      Lambda

      _let

        l

        Lambda

        _new

          Lambda

        : _no_type

        _dispatch

          _object

            l

          : _no_type

          init

          (

          _object

            x

          : _no_type

          _object

            e

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      app

      _formal

        e1

        Expr

      _formal

        e2

        Expr

      App

      _let

        a

        App

        _new

          App

        : _no_type

        _dispatch

          _object

            a

          : _no_type

          init

          (

          _object

            e1

          : _no_type

          _object

            e2

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      i

      Expr

      _let

        x

        Variable

        _dispatch

          _object

            self

          : _no_type

          var

          (

          _string

            "x"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          lam

          (

          _object

            x

          : _no_type

          _object

            x

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      k

      Expr

      _let

        x

        Variable

        _dispatch

          _object

            self

          : _no_type

          var

          (

          _string

            "x"

          : _no_type

          )

        : _no_type

        _let

          y

          Variable

          _dispatch

            _object

              self

            : _no_type

            var

            (

            _string

              "y"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            lam

            (

            _object

              x

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              lam

              (

              _object

                y

              : _no_type

              _object

                x

              : _no_type

              )

            : _no_type

            )

          : _no_type

        : _no_type

      : _no_type

    _method

      s

      Expr

      _let

        x

        Variable

        _dispatch

          _object

            self

          : _no_type

          var

          (

          _string

            "x"

          : _no_type

          )

        : _no_type

        _let

          y

          Variable

          _dispatch

            _object

              self

            : _no_type

            var

            (

            _string

              "y"

            : _no_type

            )

          : _no_type

          _let

            z

            Variable

            _dispatch

              _object

                self

              : _no_type

              var

              (

              _string

                "z"

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              lam

              (

              _object

                x

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                lam

                (

                _object

                  y

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  lam

                  (

                  _object

                    z

                  : _no_type

                  _dispatch

                    _object

                      self

                    : _no_type

                    app

                    (

                    _dispatch

                      _object

                        self

                      : _no_type

                      app

                      (

                      _object

                        x

                      : _no_type

                      _object

                        z

                      : _no_type

                      )

                    : _no_type

                    _dispatch

                      _object

                        self

                      : _no_type

                      app

                      (

                      _object

                        y

                      : _no_type

                      _object

                        z

                      : _no_type

                      )

                    : _no_type

                    )

                  : _no_type

                  )

                : _no_type

                )

              : _no_type

              )

            : _no_type

          : _no_type

        : _no_type

      : _no_type

    )

  _class

    Main

    Term

    "lam.cl"

    (

    _method

      beta_reduce

      _formal

        e

        Expr

      Expr

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "beta-reduce: "

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            e

          : _no_type

          print_self

          (

          )

        : _no_type

        _let

          done

          Bool

          _bool

            0

          : _no_type

          _let

            new_expr

            Expr

            _no_expr

            : _no_type

            _block

              _loop

                _comp

                  _object

                    done

                  : _no_type

                : _no_type

                _block

                  _assign

                    new_expr

                    _dispatch

                      _object

                        e

                      : _no_type

                      beta

                      (

                      )

                    : _no_type

                  : _no_type

                  _cond

                    _eq

                      _object

                        new_expr

                      : _no_type

                      _object

                        e

                      : _no_type

                    : _no_type

                    _assign

                      done

                      _bool

                        1

                      : _no_type

                    : _no_type

                    _block

                      _assign

                        e

                        _object

                          new_expr

                        : _no_type

                      : _no_type

                      _dispatch

                        _object

                          self

                        : _no_type

                        out_string

                        (

                        _string

                          " =>\n"

                        : _no_type

                        )

                      : _no_type

                      _dispatch

                        _object

                          e

                        : _no_type

                        print_self

                        (

                        )

                      : _no_type

                    : _no_type

                  : _no_type

                : _no_type

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                out_string

                (

                _string

                  "\n"

                : _no_type

                )

              : _no_type

              _object

                e

              : _no_type

            : _no_type

          : _no_type

        : _no_type

      : _no_type

    _method

      eval_class

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "class EvalObject inherits IO {\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  eval() : EvalObject { { abort(); self; } };\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "};\n"

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      closure_class

      SELF_TYPE

      _block

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "class Closure inherits EvalObject {\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  parent : Closure;\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  x : EvalObject;\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  get_parent() : Closure { parent };\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  get_x() : EvalObject { x };\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  init(p : Closure) : Closure {{ parent <- p; self; }};\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "  apply(y : EvalObject) : EvalObject { { abort(); self; } };\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "};\n"

          : _no_type

          )

        : _no_type

      : _no_type

    _method

      gen_code

      _formal

        e

        Expr

      SELF_TYPE

      _let

        cl

        LambdaListRef

        _dispatch

          _new

            LambdaListRef

          : _no_type

          reset

          (

          )

        : _no_type

        _block

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "Generating code for "

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              e

            : _no_type

            print_self

            (

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "\n------------------cut here------------------\n"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "(*Generated by lam.cl (Jeff Foster, March 2000)*)\n"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            eval_class

            (

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            closure_class

            (

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "class Main {\n"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "  main() : EvalObject {\n"

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              e

            : _no_type

            gen_code

            (

            _new

              VarList

            : _no_type

            _object

              cl

            : _no_type

            )

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "\n};\n};\n"

            : _no_type

            )

          : _no_type

          _loop

            _comp

              _dispatch

                _object

                  cl

                : _no_type

                isNil

                (

                )

              : _no_type

            : _no_type

            _let

              e

              VarList

              _dispatch

                _object

                  cl

                : _no_type

                headE

                (

                )

              : _no_type

              _let

                c

                Lambda

                _dispatch

                  _object

                    cl

                  : _no_type

                  headC

                  (

                  )

                : _no_type

                _let

                  n

                  Int

                  _dispatch

                    _object

                      cl

                    : _no_type

                    headN

                    (

                    )

                  : _no_type

                  _block

                    _dispatch

                      _object

                        cl

                      : _no_type

                      removeHead

                      (

                      )

                    : _no_type

                    _dispatch

                      _object

                        c

                      : _no_type

                      gen_closure_code

                      (

                      _object

                        n

                      : _no_type

                      _object

                        e

                      : _no_type

                      _object

                        cl

                      : _no_type

                      )

                    : _no_type

                  : _no_type

                : _no_type

              : _no_type

            : _no_type

          : _no_type

          _dispatch

            _object

              self

            : _no_type

            out_string

            (

            _string

              "\n------------------cut here------------------\n"

            : _no_type

            )

          : _no_type

        : _no_type

      : _no_type

    _method

      main

      Int

      _block

        _dispatch

          _dispatch

            _object

              self

            : _no_type

            i

            (

            )

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _dispatch

            _object

              self

            : _no_type

            k

            (

            )

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _dispatch

            _object

              self

            : _no_type

            s

            (

            )

          : _no_type

          print_self

          (

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          out_string

          (

          _string

            "\n"

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          beta_reduce

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                app

                (

                _dispatch

                  _object

                    self

                  : _no_type

                  s

                  (

                  )

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  k

                  (

                  )

                : _no_type

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                i

                (

                )

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          beta_reduce

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                k

                (

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                i

                (

                )

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          gen_code

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          gen_code

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                app

                (

                _dispatch

                  _object

                    self

                  : _no_type

                  s

                  (

                  )

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  k

                  (

                  )

                : _no_type

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                i

                (

                )

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          gen_code

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                app

                (

                _dispatch

                  _object

                    self

                  : _no_type

                  app

                  (

                  _dispatch

                    _object

                      self

                    : _no_type

                    app

                    (

                    _dispatch

                      _object

                        self

                      : _no_type

                      app

                      (

                      _dispatch

                        _object

                          self

                        : _no_type

                        app

                        (

                        _dispatch

                          _object

                            self

                          : _no_type

                          app

                          (

                          _dispatch

                            _object

                              self

                            : _no_type

                            i

                            (

                            )

                          : _no_type

                          _dispatch

                            _object

                              self

                            : _no_type

                            k

                            (

                            )

                          : _no_type

                          )

                        : _no_type

                        _dispatch

                          _object

                            self

                          : _no_type

                          s

                          (

                          )

                        : _no_type

                        )

                      : _no_type

                      _dispatch

                        _object

                          self

                        : _no_type

                        s

                        (

                        )

                      : _no_type

                      )

                    : _no_type

                    _dispatch

                      _object

                        self

                      : _no_type

                      k

                      (

                      )

                    : _no_type

                    )

                  : _no_type

                  _dispatch

                    _object

                      self

                    : _no_type

                    s

                    (

                    )

                  : _no_type

                  )

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  i

                  (

                  )

                : _no_type

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                k

                (

                )

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              i

              (

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _dispatch

          _object

            self

          : _no_type

          gen_code

          (

          _dispatch

            _object

              self

            : _no_type

            app

            (

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                i

                (

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                app

                (

                _dispatch

                  _object

                    self

                  : _no_type

                  k

                  (

                  )

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  s

                  (

                  )

                : _no_type

                )

              : _no_type

              )

            : _no_type

            _dispatch

              _object

                self

              : _no_type

              app

              (

              _dispatch

                _object

                  self

                : _no_type

                k

                (

                )

              : _no_type

              _dispatch

                _object

                  self

                : _no_type

                app

                (

                _dispatch

                  _object

                    self

                  : _no_type

                  s

                  (

                  )

                : _no_type

                _dispatch

                  _object

                    self

                  : _no_type

                  s

                  (

                  )

                : _no_type

                )

              : _no_type

              )

            : _no_type

            )

          : _no_type

          )

        : _no_type

        _int

          0

        : _no_type

      : _no_type

    )